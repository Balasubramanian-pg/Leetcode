# Combine Two Tables (Left Outer Join)

## Overview

> [!NOTE]  
> This problem demonstrates the fundamental use of LEFT OUTER JOIN in SQL to combine data from related tables while preserving all records from the primary table.

## 1. Problem Description

### 1.1 Tables Structure

#### 1.1.1 Person Table

> [!TIP]  
> The Person table contains basic identity information with personId as its primary key.

```
+-------------+---------+
| Column Name | Type    |
+-------------+---------+
| personId    | int     |
| lastName    | varchar |
| firstName   | varchar |
+-------------+---------+
```

#### 1.1.2 Address Table

> [!WARNING]  
> Note that the Address table may not contain records for all persons in the Person table.

```
+-------------+---------+
| Column Name | Type    |
+-------------+---------+
| addressId   | int     |
| personId    | int     |
| city        | varchar |
| state       | varchar |
+-------------+---------+
```

### 1.2 Requirements

> [!IMPORTANT]  
> The solution must include ALL persons from the Person table, even those without matching addresses.

## 2. Solution Approach

### 2.1 LEFT JOIN Concept

> [!TIP]  
> LEFT JOIN is perfect for this scenario as it preserves all records from the left table (Person) regardless of matches in the right table (Address).

> [!CAUTION]  
> Be careful not to use INNER JOIN here as it would exclude persons without addresses.

### 2.2 SQL Solution

```sql
SELECT
    p.firstName,
    p.lastName,
    a.city,
    a.state
FROM
    Person p
LEFT JOIN
    Address a ON p.personId = a.personId;
```

> [!NOTE]  
> The ON clause specifies the join condition using personId which links the two tables.

## 3. Example Output

> [!EXAMPLE]  
> The output demonstrates how NULL values appear for persons without address records.

```
+-----------+----------+---------------+----------+
| firstName | lastName | city          | state    |
+-----------+----------+---------------+----------+
| Allen     | Wang     | Null          | Null     |
| Bob       | Alice    | New York City | New York |
+-----------+----------+---------------+----------+
```

## 4. Alternative Solutions

### 4.1 Pandas Solution (Python)

> [!TIP]  
> Pandas merge function with how="left" parameter provides equivalent functionality to SQL LEFT JOIN.

```python
import pandas as pd

def combine_two_tables(person: pd.DataFrame, address: pd.DataFrame) -> pd.DataFrame:
    return pd.merge(left=person, right=address, how="left", on="personId")[
        ["firstName", "lastName", "city", "state"]
    ]
```

> [!WARNING]  
> Remember to specify the columns you want in the final output to avoid including unnecessary columns.

## 5. Performance Considerations

> [!IMPORTANT]  
> For large tables, ensure proper indexing on the join columns (personId) for optimal performance.

## 6. Common Pitfalls

> [!CAUTION]  
> A frequent mistake is using RIGHT JOIN instead of LEFT JOIN, which would produce different results if the table order is reversed.

> [!NOTE]  
> Some SQL dialects also support LEFT OUTER JOIN syntax which is functionally equivalent to LEFT JOIN.
