# Identifying Patients with Type I Diabetes

## Overview

> [!NOTE]  
> This problem demonstrates pattern matching in SQL to identify medical conditions within a space-delimited string field.

## 1. Problem Description

### 1.1 Table Structure

> [!TIP]  
> The Patients table contains medical records with a conditions field that stores multiple codes separated by spaces.

```
+--------------+---------+
| Column Name  | Type    |
+--------------+---------+
| patient_id   | int     |
| patient_name | varchar |
| conditions   | varchar |
+--------------+---------+
```

> [!IMPORTANT]  
> Type I Diabetes is indicated by condition codes starting with "DIAB1", which may appear anywhere in the string.

### 1.2 Requirements

> [!CAUTION]  
> The solution must detect "DIAB1" prefixes whether they appear at the start of the string or after a space.

## 2. Solution Approach

### 2.1 Pattern Matching Concept

> [!TIP]  
> Using LIKE with two patterns covers both possible positions of the DIAB1 code in the conditions string.

> [!WARNING]  
> The space before DIAB1 in the second pattern is crucial to avoid partial matches like "ADIAB1".

### 2.2 SQL Solution

```sql
SELECT patient_id, patient_name, conditions
FROM Patients
WHERE conditions LIKE 'DIAB1%' OR conditions LIKE '% DIAB1%';
```

> [!NOTE]  
> This approach efficiently catches DIAB1 codes regardless of their position in the conditions field.

## 3. Example Output

> [!EXAMPLE]  
> The output correctly identifies patients with Type I Diabetes conditions.

```
+------------+--------------+--------------+
| patient_id | patient_name | conditions   |
+------------+--------------+--------------+
| 3          | Bob          | DIAB100 MYOP |
| 4          | George       | ACNE DIAB100 |
+------------+--------------+--------------+
```

## 4. Alternative Approaches

### 4.1 Using Regular Expressions

> [!TIP]  
> REGEXP provides more flexible pattern matching capabilities.

```sql
SELECT patient_id, patient_name, conditions
FROM Patients
WHERE conditions REGEXP '(^| )DIAB1';
```

### 4.2 Using String Functions

> [!NOTE]  
> This approach explicitly checks each condition after splitting the string.

```sql
SELECT patient_id, patient_name, conditions
FROM Patients
WHERE CONCAT(' ', conditions, ' ') LIKE '% DIAB1%';
```

## 5. Performance Considerations

> [!IMPORTANT]  
> For large datasets, consider adding a full-text index on the conditions column.

## 6. Common Mistakes

> [!CAUTION]  
> Omitting the space in the second pattern would match incorrect strings like "ADIAB1".

> [!WARNING]  
> Using only the first pattern would miss conditions where DIAB1 appears after other codes.

## 7. Real-World Application

> [!TIP]  
> Similar pattern matching is used in healthcare systems to identify patients with specific conditions for treatment programs.

## 8. Edge Cases

> [!NOTE]  
> The solution handles cases with:
> - Empty conditions
> - Multiple DIAB1 codes
> - DIAB1 as the only condition

## 9. Pattern Explanation

> [!TIP]  
> The two patterns cover:
> - 'DIAB1%' - Code at start of string
> - '% DIAB1%' - Code after a space (middle or end of string)
