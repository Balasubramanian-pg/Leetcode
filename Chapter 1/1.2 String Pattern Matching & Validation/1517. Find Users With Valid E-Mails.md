# Valid Email Identification Using Regular Expressions

## Overview

> [!NOTE]  
> This problem demonstrates the use of regular expressions in SQL to validate email addresses against specific pattern requirements.

## 1. Problem Description

### 1.1 Table Structure

> [!TIP]  
> The Users table contains user information including their email addresses, some of which may be invalid.

```
+---------------+---------+
| Column Name   | Type    |
+---------------+---------+
| user_id       | int     |
| name          | varchar |
| mail          | varchar |
+---------------+---------+
```

> [!IMPORTANT]  
> The email validation requires checking both the prefix format and the exact domain match.

### 1.2 Requirements

> [!CAUTION]  
> The solution must enforce multiple validation rules simultaneously through a single regular expression pattern.

## 2. Solution Approach

### 2.1 Regular Expression Concept

> [!TIP]  
> The regex pattern must validate:
> 1. Prefix starts with a letter [A-Za-z]
> 2. Contains only allowed characters [A-Za-z0-9_.-]
> 3. Ends with exact domain @leetcode.com

> [!WARNING]  
> Special characters like '.' in regex must be properly escaped with double backslashes in SQL.

### 2.2 SQL Solution

```sql
SELECT user_id, name, mail
FROM Users
WHERE mail REGEXP '^[A-Za-z][A-Za-z0-9_.-]*@leetcode\\\\.com$';
```

> [!NOTE]  
> The REGEXP operator provides powerful pattern matching capabilities in SQL.

## 3. Example Output

> [!EXAMPLE]  
> The output shows only emails that strictly conform to all validation rules.

```
+---------+-----------+-------------------------+
| user_id | name      | mail                    |
+---------+-----------+-------------------------+
| 1       | Winston   | winston@leetcode.com    |
| 3       | Annabelle | bella-@leetcode.com     |
| 4       | Sally     | sally.come@leetcode.com |
+---------+-----------+-------------------------+
```

## 4. Alternative Approaches

### 4.1 Using LIKE with Multiple Conditions

> [!TIP]  
> For databases without REGEXP, multiple LIKE conditions can approximate the solution.

```sql
SELECT user_id, name, mail
FROM Users
WHERE mail LIKE '[A-Za-z]%@leetcode.com'
AND mail NOT LIKE '[^A-Za-z0-9_.-]%';
```

### 4.2 Using SUBSTRING_INDEX

> [!NOTE]  
> This approach separates prefix and domain for individual validation.

```sql
SELECT user_id, name, mail
FROM Users
WHERE SUBSTRING_INDEX(mail, '@', -1) = 'leetcode.com'
AND SUBSTRING_INDEX(mail, '@', 1) REGEXP '^[A-Za-z][A-Za-z0-9_.-]*$';
```

## 5. Performance Considerations

> [!IMPORTANT]  
> Regular expressions can be computationally expensive on large datasets - consider adding a prefix index.

## 6. Common Mistakes

> [!CAUTION]  
> Forgetting to escape the period in the domain (leetcode.com vs leetcode\\.com)

> [!WARNING]  
> Not anchoring the pattern with ^ and $ which could allow partial matches

## 7. Real-World Application

> [!TIP]  
> Similar email validation patterns are used in registration systems and data cleaning pipelines.

## 8. Edge Cases

> [!NOTE]  
> The solution correctly handles edge cases like:
> - Empty strings
> - Multiple @ symbols
> - International characters (though not required here)

## 9. Pattern Breakdown

> [!TIP]  
> The regex components:
> - ^[A-Za-z] - Must start with letter
> - [A-Za-z0-9_.-]* - Optional valid characters
> - @leetcode\\.com$ - Exact domain requirement
